<%- include('../_layouts/adminheader'); %>
<br></br>
<div class="container">

    <h2 class="page-title mb-3">Products</h2>
    <a href="/admin/products/add-product" class="btn btn-primary">Add a new product</a>
    <br></br>

    <% if (cnt>0) { %>
    <table class="table table-striped">
        <thead>
            <th>Product</th>
            <th>Price</th>
            <th>Category</th>
            <th>Image</th>
            <th>Edit</th>
            <th>Delete</th>
        </thead>
        <tbody>
            <% products.forEach(product => { %>
                <tr>
                    <td><%= product.title %></td>
                    <td>$<%= parseFloat(product.price).toFixed(2) %></td>
                    <td><%= product.category %></td>
                    <td>
                        <% if(product.image == ""){%>
                            <img class="producton-image" src="/images/noimage.png" alt="">
                        <% }else{ %>
                            <img class="producton-image" src="/product_images/<%= product._id %>/<%= product.image %>">
                        <% } %>
                    </td>
                    <td><a href="/admin/products/edit-product/<%= product._id %>">Edit</a></td>
                    <td><a class="confirmDeletion" href="/admin/products/delete-product/<%= product._id %>">Delete</a></td>       
                    
                </tr>
            <% }); %>
            
            
        </tbody>
    </table>
    <% }else{ %>
        <h3 class="text-center">There are no products.</h3>
    <% } %>  
</div>


<%- include('../_layouts/adminfooter'); %>